<?php

namespace Tests\Feature;

use Tests\TestCase;
use Illuminate\Foundation\Testing\RefreshDatabase;
use App\Http\Controllers\ProductController;
use App\Models\Product;
use Illuminate\Foundation\Testing\WithoutMiddleware;

class ProductControllerTest extends TestCase
{
    use RefreshDatabase, WithoutMiddleware;

    // public function testCreate()
    // {
    //     $response = $this->get('/products/create');
    //     $response->assertOk();
    //     $response->assertViewIs('products.create');
    // }

    // public function testList()
    // {
    //     $response = $this->get('/products');
    //     $response->assertOk();
    //     $response->assertViewIs('products.list');
    // }

    // public function testShow()
    // {
    //     $product = \App\Models\Product::factory()->create();
    //     $response = $this->get("/products/{$product->id}");
    //     $response->assertOk();
    //     $response->assertViewIs('products.show');
    //     $response->assertViewHas('product', $product);
    // }

    // public function testUpdate()
    // {
    //     $product = \App\Models\Product::factory()->create();
    //     $updatedData = ['name' => 'Updated Product Name', 'description' => 'Updated Description'];
    //     $response = $this->put("/products/{$product->id}", $updatedData);
    //     $response->assertRedirect('/products');
    //     $this->assertDatabaseHas('products', $updatedData);
    // }

    // public function testDelete()
    // {
    //     $product = \App\Models\Product::factory()->create();
    //     $response = $this->delete("/products/{$product->id}");
    //     $response->assertRedirect('/products');
    //     $this->assertDatabaseMissing('products', ['id' => $product->id]);
    // }

    // public function testCreateMethodCreatesInventoryLogs()
    // {

    //     $data = [
    //         'name' => 'Test Product',
    //         'description' => 'Test Description',
    //         'price' => 10.99,
    //         'category' => 'Test Category',
    //         'inventory_count' => 100,
    //     ];

    //     $request = $this->post('', $data);


    //     // Assert that the inventory log is created
    //     $this->assertDatabaseHas('inventory_logs', [
    //         'product_id' => $product->id,
    //         'quantity_change' => 100,
    //         'reason' => 'Inventory adjustment',
    //     ]);
    // }

    // public function testUpdatesLogs()
    // {
    //     $product = Product::factory()->create();
    //     $payload = $product->toArray();

    //     $response = $this->put("/products/{$product->id}", $payload);

    //     $response->assertStatus(200);
    //     $this->assertDatabaseHas('products', $payload);
    //     $this->assertDatabaseHas('inventory_logs', [
    //         'quantity_change' => $payload['inventory_count'] - $product->inventory_count,
    //         'reason' => 'Inventory adjustment',
    //     ]);
    // }
}
